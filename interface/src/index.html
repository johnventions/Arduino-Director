<html>
    <head>
        <title>Director</title>
        <link rel="stylesheet" href="/vendor.css">
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <div id="director">
        <main class='container-fluid' v-cloak>
            <div class='row'>
                <div class='col-3'>
                    <h5>Devices</h5>
                    <dl>
                        <dd v-for="port in ports">
                                {{ port.comName }}
                                <span class='btn btn-primary' v-on:click="connect(port)" v-if="activePort == null">Connect</span>
                                <span class='btn btn-primary' v-on:click="disconnect()" v-if="activePort == port.comName">Disconnect</span>
                        </dd>
                    </dl>
                    <div v-if="activePort">
                        <h5>Actors</h5>
                        <div v-for="actor in actors">
                            {{ actor.id }} | {{ actor.name }}
                        </div>
                    </div>
                    <div v-if="activePort">
                            <h5>Buttons</h5>
                            <div v-for="button in buttons">
                                {{ button.id }} | {{ button.name }}
                            </div>
                        </div>
                    <div v-if="activePort">
                        <span class='btn btn-primary' v-on:click="getOptions()">Refresh</span>
                        <h5>Commands</h5>
                        <input v-model="command">
                        <span class='btn btn-primary' v-on:click="sendCommand(command)">Send</span>
                    </div>

                </div>
                <div class='col-9'>
                    <director-machines
                        v-if="activeMachine == null"
                        :machines="machines"
                        v-on:select-machine="selectMachine($event)"
                        v-on:add-machine="addMachine()"
                        ></director-machines>
                    <div id="sequence-list" v-if="activeMachine && activeSequence == null">
                            <h5>Sequences</h5>
                            <director-list-item 
                                v-for="sequence in sequences"
                                :key="sequence._id"
                                :item="sequence"
                                v-on:select-item="selectSequence(sequence)"/>
                            <span class='btn btn-primary' v-on:click="addSequence()">Add Sequence</span>
                    </div>
                    <div id="sequence-list" v-if="activeSequence">
                        <div class='row'>
                            <div class='col-10'>
                                <div class='btn-group'>
                                    <span class='btn btn-primary'
                                        v-on:click="zoom(-10)">
                                            <i class="fas fa-search-minus"></i>
                                    </span>
                                    <span class='btn btn-primary'
                                        v-on:click="zoom(10)">
                                            <i class="fas fa-search-plus"></i>
                                    </span>
                                </div>
                                <div class='btn-group'>
                                        <span class='btn btn-primary'
                                            v-on:click="shift(0.25)">
                                                <i class="fas fa-arrow-left"></i>
                                        </span>
                                        <span class='btn btn-primary'
                                            v-on:click="shift(-0.25)">
                                                <i class="fas fa-arrow-right"></i>
                                        </span>
                                    </div>
                                <div class='btn-group'>
                                    <span class='btn btn-danger'
                                        v-on:click="playSequence(activeSequence)">
                                        <i class="fas fa-play-circle"></i>
                                    </span>
                                    <span class='btn btn-danger'
                                        v-on:click="playSequence(activeSequence)">
                                        <i class="far fa-pause-circle"></i>
                                    </span>
                                </div>
                                <h4>{{ activeSequence.name }}</h4>
                            </div>
                            <div class='col-2'>
                                <span class='btn btn-success' v-on:click="saveSequence()">
                                    Save
                                    <i class="far fa-save"></i>
                                </span>
                            </div>
                        </div>
                        <director-component
                            v-for="component in activeSequence.components"
                            :key="component._id"
                            :component="component">
                            </director-component>
                        <span class='btn btn-primary' v-on:click="addComponent()">Add Component</span>
                    </div>                    
                </div>
            </div>
        </main>
    </div>
    </body>
    <script src="/vendor.js"></script>
    <script src="/main.js"></script>
</html>